<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, shrink-to-fit=0, initial-scale=1.0">
    <meta name="keywords" content="peer-to-peer, networking, Web applications, WebRTC">
    <title>Close Friends</title>
    <script id="lozya-settings">
        const JITSI_HOST = "lozyafun.jvns.ca",
            MOVE_REPEAT = 0.125,
            MOVE_TRANSITION_TIME = 0.5;

        // TODO: These need to be user-configurable settings
        let AUDIO_DISTANCE_MIN = 2,
            AUDIO_DISTANCE_MAX = 10;
    </script>
    <link type="text/css" rel="stylesheet" href="stylesheets/general.css" />
    <link type="text/css" rel="stylesheet" href="stylesheets/icons.css" />
    <link type="text/css" rel="stylesheet" href="stylesheets/menu.css" />
    <link type="text/css" rel="stylesheet" href="stylesheets/gui.css" />
</head>

<body>
    <section id="main">
        <div id="jitsi"></div>
        <canvas id="frontBuffer"></canvas>
        <div id="demo"><video src="videos/demo.webm" autoplay loop></video></div>
        <div id="loginView">
            <section id="intro">
                <h1>Lozya</h1>
                <p>Even when it works, teleconferencing still kind of sucks. Only one person can realistically talk at any one time. This is fine for people giving presentations, but in real meetings, people speak over and around each other, or pair off into smaller subgroups, still being able to overhear the larger group. </p>
                <p>Lozya adds a small, RPG-style map to the Jitsi meeting view. It gives you an avatar to walk around the room. Users choose where to sit in relation to other users. Users very close to you are set to full volume. Users a little far away have their volume scaled down accordingly. Users too far away to care about are rendered with zero volume.</p>
                <form>
                    <label for="room" style="
    grid-column: 1;
    grid-row: 1">
                        Room name:
                    </label>
                    <input type="text" id="room" placeholder="(Required)" style="
    grid-column: 2 / 4;
    grid-row: 1" />


                    <label for="user" style="
    grid-column: 1;
    grid-row: 2">
                        User name:
                    </label>
                    <input type="text" id="user" placeholder="(Required)" style="
    grid-column: 2 / 4;
    grid-row: 2" />

                    <button type="button" id="connect" style="
    grid-column: 3;
    grid-row: 4">
                        Connect
                    </button>
                </form>
            </section>
        </div>
    </section>
    <section id="menu" class="menu-open">
        <ul>
            <li>
                <a id="menuControl">
                    <span class="icon icon-shrink">
                        <span class="accessibility-text">Toggle menu visibility.</span>
                    </span>
                </a>
            </li>
            <li>
                <a href="https://github.com/capnmidnight/lozya" target="_blank" rel="noopener">
                    <span class="icon icon-github" title="Follow Lozya on Github">
                        <span class="accessibility-text">Follow Lozya on Github</span>
                    </span>
                </a>
            </li>
            <li>
                <a href="https://twitter.com/Sean_McBeth" target="_blank" rel="noopener">
                    <span class="icon icon-twitter" title="Follow @Sean_McBeth on Twitter">
                        <span class="accessibility-text">Follow @Sean_McBeth on Twitter</span>
                    </span>
                </a>
            </li>
        </ul>
    </section>

    <script src="scripts/jitsi-meet-external-api.js"></script>
    <script type="module">
        import { jitsiClient } from "./scripts/jitsihax-client.js";
        import { Game } from "./scripts/game.js";
        const game = new Game(jitsiClient);
    </script>
</body>

</html>
